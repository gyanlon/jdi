(function(t){function e(e){for(var r,i,o=e[0],l=e[1],c=e[2],h=0,f=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),s=n.n(r);s.a},"0f88":function(t,e,n){"use strict";var r=n("3878"),s=n.n(r);s.a},3878:function(t,e,n){},5057:function(t,e,n){"use strict";var r=n("8cfd"),s=n.n(r);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("div",[n("router-view",{key:t.$route.path})],1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("span",[t._v("Jimmy 测验小站")])])])])}],i={name:"app",methods:{startTest:function(){}},created:function(){this.$router.push("menu")}},o=i,l=(n("034f"),n("2877")),c=Object(l["a"])(o,s,a,!1,null,null,null),u=c.exports,h=n("c478"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exam"},[t.submit?n("h3",[t._v("考试已完成")]):t._e(),t.submit?t._e():n("h3",[t._v("考试中...")]),n("div",{staticClass:"container papper"},[n("ExamPapper",{attrs:{submit:t.submit},on:{change:t.change}})],1),t.submit?t._e():n("div",{staticClass:"container button"},[n("input",{staticClass:"primary-button",attrs:{type:"button",value:"做完了"},on:{click:t.check}})]),t.submit?n("div",{staticClass:"container result"},[n("p",[t._v("考试得分："+t._s(t.resultMessage))]),n("p"),100===t.score?n("h3",[t._v("不错哦")]):t._e(),t.score>=80&&t.score<100?n("h3",[t._v("加油，再细心一点，你可以得到100分的！")]):t._e(),t.score>60&&t.score<80?n("h3",[t._v("有点难度吧，不服气就"),n("router-link",{attrs:{to:"/menu"}},[t._v(" 点我 ")]),t._v("再来一遍。")],1):t._e(),t.score<60?n("h3",[t._v("失败是成功之母，错题是最好的老师，来看看我们错在哪儿了吧。"),n("p"),t._v("不服气就"),n("router-link",{attrs:{to:"/menu"}},[t._v(" 点我 ")]),t._v("再来一遍!")],1):t._e()]):t._e()])},p=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"questionBody"},[n("ul",t._l(t.questions,(function(e){return n("li",[n("InputQ",{attrs:{id:e.id,score:e.score,content:e.pattern,variables:e.variables,answers:e.answers,submit:t.submit},on:{change:t.change}})],1)})),0)])},d=[],g=n("768b"),m=(n("ac6a"),n("ffc1"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"question",attrs:{id:t.id,score:t.score},domProps:{innerHTML:t._s(t.template)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.submit,expression:"submit"}]},[t.correct?n("a",{staticClass:"correct"}):t._e(),t.correct?t._e():n("a",{staticClass:"wrong"})])])}),b=[],_=(n("6b54"),n("456d"),n("28a5"),{props:{id:null,score:0,content:null,variables:null,answers:null,submit:!1},data:function(){return{HTMLcontent:null,result:{},template:null,correct:!1}},methods:{getInputHtml:function(t){return"(<input type='text' id='"+this.id+"_in"+t+"' class='input "+this.id+"'/>)"},genQuestions:function(){var t=this.variables.split(",");this.HTMLcontent=this.content;var e=this.HTMLcontent.split("{}");this.HTMLcontent=e[0];for(var n=1;n<e.length;n++)this.HTMLcontent+=t[n-1]+e[n];for(e=this.HTMLcontent.split("()"),this.HTMLcontent=e[0],n=1;n<e.length;n++)this.HTMLcontent+=this.getInputHtml(n-1)+e[n];return"<div>"+this.HTMLcontent+"</div>"},sendBackResponse:function(){console.log(JSON.stringify(this.result)),this.correct=this.check(this.answers,this.result);var t={qid:this.id,score:this.correct?this.score:0};this.$emit("change",t)},check:function(t,e){var n=0,r=t.split(",");if(r.length!==Object.keys(e).length)return!1;for(var s=0,a=Object.entries(e);s<a.length;s++){var i=Object(g["a"])(a[s],2),o=(i[0],i[1]);if(console.log(r[n].toString(),o.toString()),r[n].toString()!==o.toString())return!1;n++}return!0},change:function(t,e){return function(n){t[n.target.id]=n.target.value,e()}}},created:function(){this.template=this.genQuestions()},mounted:function(){var t,e=document.getElementsByClassName("input "+this.id);for(t=0;t<e.length;t++)e[t].addEventListener("change",this.change(this.result,this.sendBackResponse))}}),w=_,y=(n("0f88"),Object(l["a"])(w,m,b,!1,null,null,null)),x=y.exports,O=(n("a481"),"questions"),M=[{id:"q1",score:5,pattern:"{} &times; {} = ()",variables:"3,5",answers:"15",variable_extent:["1-9","1-9"],answer_alg:["$[1]*$[2]"]},{id:"q2",score:20,pattern:"{} &times; {} 表示 () 的 () 倍， 又表示()个() 。",variables:"8,9",answers:"8,9,9,8",variable_extent:["1-9","1-9"],answer_alg:["$[1]","$[2]","$[2]","$[1]"]}];function j(){console.log("init");for(var t=0;t<M.length;t++){var e=M[t],n="";console.log(e.variable_extent);for(var r=0;r<e.variable_extent.length;r++)n+=$(e.variable_extent[r])+",";e.variables=n.substr(0,n.length-1),console.log(e.variables),e.answers=S(e.variables,e.answer_alg)}}function S(t,e){for(var n="",r=T(t,e),s=0;s<r.length;s++)n+=r[s]+",";return n=n.substr(0,n.length-1),console.log("answers:",n),n}function T(t,e){for(var n=[],r=0;r<e.length;r++){for(var s=[],a=t.split(","),i=0;i<a.length;i++)s[i+1]=a[i];var o=e[r].replace(/\$/g,"adjustArr");console.log("exp=",o,"adjustArr",s),n[r]=window.eval.call(window,"(function (adjustArr) { return "+o+"; })")(s)}return console.log("args:",n),n}function $(t){console.log("ex=",t);var e=t;return t.indexOf("-")>0&&(e=C(parseInt(t.split("-")[0]),parseInt(t.split("-")[1]))),console.log("random:",e),e}function C(t,e){return Math.floor(Math.random()*(e-t+1)+t)}j(),window.localStorage.setItem(O,JSON.stringify(M));var k={fetch:function(){return JSON.parse(window.localStorage.getItem(O)||"[]")},save:function(t){window.localStorage.setItem(O,JSON.stringify(t))}},E={props:{submit:!1},components:{InputQ:x},data:function(){return{total:0,result:{},questions:k.fetch()}},methods:{calculateTotal:function(){var t,e=document.getElementsByClassName("question");for(this.total=0,t=0;t<e.length;t++){var n=e[t].getAttribute("score");n&&(this.total+=parseInt(n))}return this.total},caculateScore:function(t){for(var e=0,n=0,r=Object.entries(t);n<r.length;n++){var s=Object(g["a"])(r[n],2),a=(s[0],s[1]);e+=parseInt(a)}return e},change:function(t){console.log("GET event:",JSON.stringify(t)),this.result[t.qid]=t.score;var e={total:this.calculateTotal(),score:this.caculateScore(this.result)};this.$emit("change",e)}}},I=E,H=Object(l["a"])(I,v,d,!1,null,null,null),L=H.exports,q={components:{ExamPapper:L},data:function(){return{resultMessage:null,score:0,submit:!1}},methods:{change:function(t){this.score=Math.round(100*parseInt(t.score)/parseInt(t.total))},check:function(){this.submit=!1,this.resultMessage="",this.inputAllFilled()?(this.resultMessage=this.score+"分",this.submit=!0,this.disableAllInputBox()):alert("你还没有做完呢 ！！！")},inputAllFilled:function(){for(var t=document.getElementsByClassName("input"),e=0;e<t.length;e++){var n=t[e].value;if(!n)return!1}return!0},disableAllInputBox:function(){for(var t=document.getElementsByClassName("input"),e=0;e<t.length;e++)t[e].readOnly=!0}}},N=q,P=(n("5057"),Object(l["a"])(N,f,p,!1,null,null,null)),B=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{attrs:{to:"/exam"}},[n("h2",{staticClass:"ab_title",staticStyle:{color:"blue",cursor:"wait"}},[t._v("新的测验")])])],1)},J=[],Q={name:"Menu"},F=Q,R=Object(l["a"])(F,A,J,!1,null,null,null),G=R.exports;r["a"].use(h["a"]);var z=new h["a"]({routes:[{path:"/exam",name:"Exam",component:B},{path:"/menu",name:"Menu",component:G}]});new r["a"]({el:"#app",router:z,render:function(t){return t(u)}}),r["a"].config.productionTip=!1},"64a9":function(t,e,n){},"8cfd":function(t,e,n){}});
//# sourceMappingURL=app.2dfa434e.js.map